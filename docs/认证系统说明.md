# ğŸ” DifyChatSite è®¤è¯ç³»ç»Ÿè¯´æ˜

## ğŸ“‹ è®¤è¯æ–¹å¼æ›´æ–°

### åç«¯è¦æ±‚
- **è®¤è¯æ–¹å¼**: ç”¨æˆ·å + å¯†ç 
- **ç™»å½•å­—æ®µ**: `username` å’Œ `password`
- **ä¸æ”¯æŒ**: é‚®ç®±ç™»å½•

### å‰ç«¯é€‚é…
å·²å®Œæˆä»¥ä¸‹ä¿®æ”¹ä»¥é€‚é…åç«¯ï¼š

#### 1. ç™»å½•é¡µé¢ (`login.html`)
```html
<!-- ä¿®æ”¹å‰ -->
<input type="email" id="email" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€">

<!-- ä¿®æ”¹å -->
<input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
```

#### 2. è¡¨å•éªŒè¯
```javascript
// ä¿®æ”¹å‰: é‚®ç®±éªŒè¯
const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
if (!emailRegex.test(email)) {
    showToast('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€', 'error');
    return;
}

// ä¿®æ”¹å: ç”¨æˆ·åéªŒè¯
if (username.length < 3) {
    showToast('ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦', 'error');
    return;
}
```

#### 3. API è°ƒç”¨
```javascript
// ä¿®æ”¹å‰
await difyApi.login(email, password);

// ä¿®æ”¹å
await difyApi.login(username, password);
```

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### API å®¢æˆ·ç«¯ç‰¹æ€§
- âœ… ç”¨æˆ·å+å¯†ç è®¤è¯
- âœ… è‡ªåŠ¨tokenåˆ·æ–°
- âœ… æ¼”ç¤ºæ¨¡å¼æ”¯æŒ
- âœ… å®Œæ•´é”™è¯¯å¤„ç†
- âœ… é›¶å¤–éƒ¨ä¾èµ–

### æ¼”ç¤ºæ¨¡å¼é…ç½®
```javascript
const API_CONFIG = {
    DEMO_MODE: true,  // æ¼”ç¤ºæ¨¡å¼ï¼Œæ— éœ€åç«¯
    BASE_URL: 'http://192.168.1.90:5000/api/v1'
};
```

å½“ `DEMO_MODE = true` æ—¶ï¼š
- ä»»æ„ç”¨æˆ·åï¼ˆ3ä¸ªå­—ç¬¦ä»¥ä¸Šï¼‰+ ä»»æ„å¯†ç å¯ç™»å½•
- è¿”å›æ¨¡æ‹Ÿæ•°æ®ï¼Œä¸ä¾èµ–åç«¯
- é€‚åˆå‰ç«¯å¼€å‘å’Œæ¼”ç¤º

å½“ `DEMO_MODE = false` æ—¶ï¼š
- è¿æ¥çœŸå®åç«¯API
- ä½¿ç”¨å®é™…çš„ç”¨æˆ·å+å¯†ç éªŒè¯
- è¿”å›çœŸå®æ•°æ®

## ğŸš€ ä½¿ç”¨è¯´æ˜

### 1. å¼€å‘ç¯å¢ƒ
ä¿æŒ `DEMO_MODE = true` è¿›è¡Œå‰ç«¯å¼€å‘

### 2. ç”Ÿäº§ç¯å¢ƒ
1. è®¾ç½® `API_CONFIG.DEMO_MODE = false`
2. é…ç½®æ­£ç¡®çš„ `API_CONFIG.BASE_URL`
3. ç¡®ä¿åç«¯APIå¯è®¿é—®

### 3. æµ‹è¯•æ–¹æ³•
ä½¿ç”¨ `api-test.html` é¡µé¢æµ‹è¯•æ‰€æœ‰APIåŠŸèƒ½ï¼š
- ç”¨æˆ·å+å¯†ç ç™»å½•æµ‹è¯•
- æ™ºèƒ½ä½“åˆ—è¡¨è·å–
- æ¶ˆæ¯å‘é€åŠŸèƒ½
- å¥åº·æ£€æŸ¥

## ğŸ“ æ›´æ–°æ–‡ä»¶åˆ—è¡¨

å·²æ›´æ–°çš„æ–‡ä»¶ï¼š
- âœ… `login.html` - ç™»å½•è¡¨å•
- âœ… `js/api/dify-api.js` - APIå®¢æˆ·ç«¯
- âœ… `api-test.html` - APIæµ‹è¯•é¡µé¢
- âœ… `index.html` - é¦–é¡µé”™è¯¯ä¿®å¤

## ğŸ” éªŒè¯æ¸…å•

ç™»å½•åŠŸèƒ½éªŒè¯ï¼š
- [ ] ç”¨æˆ·åå­—æ®µæ˜¾ç¤ºæ­£ç¡®
- [ ] ç”¨æˆ·åéªŒè¯ï¼ˆæœ€å°‘3ä¸ªå­—ç¬¦ï¼‰
- [ ] å¯†ç éªŒè¯æ­£å¸¸
- [ ] æ¼”ç¤ºæ¨¡å¼ç™»å½•æˆåŠŸ
- [ ] é”™è¯¯æç¤ºå‡†ç¡®

API åŠŸèƒ½éªŒè¯ï¼š
- [ ] å¥åº·æ£€æŸ¥æ­£å¸¸
- [ ] æ™ºèƒ½ä½“åˆ—è¡¨è·å–
- [ ] æ¶ˆæ¯å‘é€åŠŸèƒ½
- [ ] Token è‡ªåŠ¨åˆ·æ–°

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ¼”ç¤ºæ¨¡å¼**: å½“å‰ä¸ºæ¼”ç¤ºæ¨¡å¼ï¼Œæ‰€æœ‰æ•°æ®ä¸ºæ¨¡æ‹Ÿæ•°æ®
2. **ç”Ÿäº§éƒ¨ç½²**: éœ€è¦å°† `DEMO_MODE` è®¾ä¸º `false` å¹¶é…ç½®æ­£ç¡®çš„åç«¯åœ°å€
3. **å®‰å…¨æ€§**: ç¡®ä¿åç«¯APIæ”¯æŒCORSæˆ–é…ç½®ä»£ç†
4. **å…¼å®¹æ€§**: è®¤è¯ç³»ç»Ÿå®Œå…¨ç¬¦åˆåç«¯APIæ–‡æ¡£è¦æ±‚

---

**å½“å‰çŠ¶æ€**: âœ… è®¤è¯ç³»ç»Ÿå·²å®Œå…¨é€‚é…åç«¯ç”¨æˆ·å+å¯†ç æ–¹å¼
